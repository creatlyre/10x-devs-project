---
import Layout from "../layouts/Layout.astro";
export const prerender = false;
import { getDictionary } from "../lib/i18n";

const lang = Astro.locals.lang;
const dict = getDictionary(lang);
// Assign color accents deterministically to dict.features
const accents = [
  "from-blue-400 to-indigo-400",
  "from-purple-400 to-pink-400",
  "from-emerald-400 to-teal-400",
  "from-amber-400 to-orange-400",
  "from-fuchsia-400 to-rose-400",
  "from-sky-400 to-cyan-400",
];
const features = dict.features.map((f, i) => ({ ...f, accent: accents[i % accents.length] }));

function switchUrl(target: string) {
  const url = new URL(Astro.request.url);
  url.searchParams.set('lang', target);
  return url.pathname + '?' + url.searchParams.toString();
}
---

<Layout title="TripCraft â€“ Plan. Optimize. Travel.">
  <main class="relative min-h-screen flex flex-col overflow-hidden bg-slate-950 text-slate-50">
    <!-- Decorative gradients -->
    <div aria-hidden="true" class="pointer-events-none absolute inset-0">
      <div class="absolute -top-40 -left-40 h-96 w-96 rounded-full bg-indigo-600/20 blur-3xl" />
      <div class="absolute top-1/2 -right-40 h-96 w-96 rounded-full bg-fuchsia-600/20 blur-3xl" />
    </div>

    <!-- Top bar -->
    <header class="relative z-10 flex items-center justify-between px-6 py-5">
      <div class="flex items-center gap-3">
        <span class="inline-flex h-10 w-10 items-center justify-center rounded-xl bg-gradient-to-br from-indigo-500 to-purple-600 font-bold text-white shadow-md">TC</span>
        <h1 class="text-xl font-semibold tracking-tight">TripCraft</h1>
      </div>
      <nav aria-label="Primary" class="flex items-center gap-3">
        <div class="flex items-center gap-1" aria-label={dict.langSwitcher.label}>
          <a href={switchUrl('pl')} lang="pl" hreflang="pl" class={`inline-flex items-center gap-1.5 rounded-md px-3 py-1.5 text-xs font-medium border transition ${lang==='pl' ? 'border-indigo-400/60 text-white bg-slate-800/60' : 'border-slate-700/70 text-slate-300 hover:text-white hover:border-indigo-400/50'}`}>ðŸ‡µðŸ‡± <span class="hidden sm:inline">PL</span></a>
          <a href={switchUrl('en')} lang="en" hreflang="en" class={`inline-flex items-center gap-1.5 rounded-md px-3 py-1.5 text-xs font-medium border transition ${lang==='en' ? 'border-indigo-400/60 text-white bg-slate-800/60' : 'border-slate-700/70 text-slate-300 hover:text-white hover:border-indigo-400/50'}`}>ðŸ‡¬ðŸ‡§ <span class="hidden sm:inline">EN</span></a>
        </div>
        <a href="/login" class="group relative inline-flex items-center gap-2 rounded-lg border border-slate-700/70 bg-slate-800/40 px-5 py-2.5 text-sm font-medium text-slate-100 backdrop-blur transition hover:border-indigo-400/60 hover:bg-slate-800/70 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-indigo-400/70 focus-visible:ring-offset-2 focus-visible:ring-offset-slate-950">
          <span class="relative z-10">{dict.hero.cta}</span>
          <span class="absolute inset-0 rounded-lg bg-gradient-to-r from-indigo-500/0 via-indigo-500/0 to-indigo-500/0 opacity-0 transition group-hover:opacity-30" />
        </a>
      </nav>
    </header>

    <!-- Hero Section -->
    <section class="relative z-10 flex flex-1 flex-col items-center px-6 pt-4 pb-24 md:pt-12 lg:pt-20">
      <div class="mx-auto max-w-5xl text-center">
        <p class="inline-flex items-center gap-2 rounded-full border border-slate-700/60 bg-slate-800/40 px-4 py-1.5 text-[11px] font-medium uppercase tracking-wider text-slate-300/80 backdrop-blur">
          <span class="h-1.5 w-1.5 rounded-full bg-gradient-to-r from-indigo-400 to-fuchsia-400 animate-pulse" />
          {dict.hero.badge}
        </p>
        <h2 class="mt-6 bg-gradient-to-br from-indigo-200 via-sky-200 to-fuchsia-200 bg-clip-text text-4xl font-bold leading-tight text-transparent md:text-5xl lg:text-6xl">
          {dict.hero.heading}
        </h2>
        <p class="mx-auto mt-6 max-w-2xl text-base leading-relaxed text-slate-300 md:text-lg">
          {dict.hero.sub}
        </p>
      </div>

      <!-- Feature Roller -->
      <div class="relative mt-14 w-full max-w-4xl">
        <div class="overflow-hidden rounded-2xl border border-slate-800/70 bg-slate-900/40 backdrop-blur-xl shadow-xl">
          <ul
            class="feature-roller relative flex animate-[scrollY_24s_linear_infinite] flex-col divide-y divide-slate-800/70 text-left"
            role="list"
            aria-label="Platform capabilities"
          >
            {features.concat(features).map((f, i) => (
              <li
                class="group flex flex-col gap-1 px-6 py-5 md:px-8 md:py-6 hover:bg-slate-800/40 focus-within:bg-slate-800/40"
                aria-label={f.title}
              >
                <div class="flex items-center gap-3">
                  <span class={`h-2 w-2 rounded-full bg-gradient-to-r ${f.accent}`} />
                  <h3 class="text-base font-semibold tracking-tight md:text-lg">
                    {f.title}
                  </h3>
                </div>
                <p class="pl-5 text-sm leading-relaxed text-slate-400 md:text-[15px]">{f.desc}</p>
              </li>
            ))}
          </ul>
        </div>
        <div class="pointer-events-none absolute inset-x-0 top-0 h-20 bg-gradient-to-b from-slate-950 to-transparent" aria-hidden="true" />
        <div class="pointer-events-none absolute inset-x-0 bottom-0 h-20 bg-gradient-to-t from-slate-950 to-transparent" aria-hidden="true" />
      </div>

      <div class="mt-14 flex flex-col items-center gap-5">
        <a href="/login" class="group relative inline-flex items-center gap-2 rounded-xl bg-gradient-to-br from-indigo-500 via-fuchsia-500 to-sky-500 px-8 py-4 text-sm font-semibold tracking-wide text-white shadow-lg shadow-indigo-900/40 transition hover:scale-[1.02] focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-fuchsia-400 focus-visible:ring-offset-2 focus-visible:ring-offset-slate-950">
          <span>{dict.hero.cta}</span>
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="h-4 w-4 transition group-hover:translate-x-1" aria-hidden="true"><path d="M5 12h14" /><path d="m12 5 7 7-7 7" /></svg>
        </a>
        <p class="max-w-md text-center text-xs leading-relaxed text-slate-500">
         {lang === 'pl' ? 'KontynuujÄ…c akceptujesz nasze fikcyjne Warunki i PrywatnoÅ›Ä‡.' : 'By continuing you agree to our imaginary Terms & Privacy.'} {lang === 'pl' ? 'Zaloguj siÄ™ aby rozpoczÄ…Ä‡ planowanie.' : 'Log in to start crafting your trip.'}
        </p>
      </div>
    </section>

    <footer class="relative z-10 px-6 py-8 text-center text-xs text-slate-500/80">
      <p>{dict.footer.copyright}</p>
    </footer>
  </main>
</Layout>

<style>
  @keyframes scrollY {
    0% { transform: translateY(0); }
    100% { transform: translateY(-50%); }
  }
  .feature-roller:hover { animation-play-state: paused; }
</style>
